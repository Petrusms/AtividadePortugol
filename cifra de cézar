programa{
	
	inclua biblioteca Texto -->t 
	inclua biblioteca Tipos -->ti
	
   const cadeia alfabeto[26] = {"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"}
         
	  funcao inicio() {
	  	
       inteiro opcao
	  inteiro c
	  cadeia t
	  escreva("O que deseja fazer?\n")
	  escreva("1 criptografar \n2 descriptografar\n")
	  leia(opcao)
	  escolha(opcao){
	  	caso 1:
			escreva("Que palavra ou frase deseja codificar?\n")
			leia(t)
			escreva("Em qual chave?\n")
			leia(c)
			criptografar(t,c)
			pare
	  	caso 2:
	  	     escreva("Que palavra deseja descriptografar?\n")
	  	     leia(t)
	  	     escreva("Em qual chave deseja testar?\n")
	  	     leia(c)
	  	     descriptografar(t, c)
	  	     pare
		  }
	  }
	  funcao criptografar(cadeia texto,inteiro chave){

	  	inteiro posicao
	  	inteiro NumCarac = t.numero_caracteres(texto)
	  	caracter letracarac=' '
	  	cadeia letra = " "
          logico esta_no_alfabeto
	  	
		para(inteiro h=0;h<NumCarac;h++){//percorre cada uma das letras da frase informada

			esta_no_alfabeto=falso
			letracarac = t.obter_caracter(texto,h)
			letra = ti.caracter_para_cadeia(letracarac)
			
		para(inteiro i=0;i<26;i++){//percorre todo o alfabeto em busca da posição da letra
			se(letra== alfabeto[i]){
				esta_no_alfabeto=verdadeiro
				posicao = i + chave
				posicao = posicao % 26
				escreva(alfabeto[posicao])
				}
			}
			se(esta_no_alfabeto==falso){
				escreva(" ")
			}
		 }
		 
	  }
	  funcao descriptografar(cadeia texto, inteiro chave){

	  	inteiro posicao
	  	inteiro NumCarac = t.numero_caracteres(texto)
	  	caracter letracarac=' '
	  	cadeia letra = " "
          logico esta_no_alfabeto
          cadeia resposta,t
          inteiro c
	  	
		para(inteiro h=0;h<NumCarac;h++){

			esta_no_alfabeto=falso
			letracarac = t.obter_caracter(texto,h)
			letra = ti.caracter_para_cadeia(letracarac)
			
		para(inteiro i=0;i<26;i++){
			se(letra== alfabeto[i]){
				esta_no_alfabeto=verdadeiro
				posicao = i - chave
				se(posicao<0){
					posicao = posicao + 26}
				escreva(alfabeto[posicao])
				}
			}
			se(esta_no_alfabeto==falso){
				escreva(" ")	
			}
		 }
		 escreva("\nA palavra decodificada fez sentido?(responsa com sim ou não)\n")
		 leia(resposta)
		 se(resposta=="sim"){
		 	escreva("Deseja decodificar mais alguma coisa?\n")
		 	leia(resposta)
		 }
		 senao{
		 	escreva("Informe novamente a palavra criptografada:\n")
		 	leia(t)
		 	escreva("Informe outra chave:\n")
		 	leia(c)
		 	descriptografar(t, c)	 		
			 }	 	 	
	   }
}
